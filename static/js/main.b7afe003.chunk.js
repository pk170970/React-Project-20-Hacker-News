(this.webpackJsonppackagejson=this.webpackJsonppackagejson||[]).push([[0],{17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(6),s=a.n(r),o=(a(17),a(1)),i=a(4),u=a(7),j=a(8),b="SET_LOADING",l="SET_STORIES",p="REMOVE_STORY",d="HANDLE_PAGE",O="HANDLE_SEARCH",h=function(e,t){switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case l:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,story:t.payload.story,nbPages:t.payload.nbPages});case p:return Object(o.a)(Object(o.a)({},e),{},{story:e.story.filter((function(e){return e.objectID!==t.payload}))});case O:return Object(o.a)(Object(o.a)({},e),{},{query:t.payload,page:0});case d:if("next"===t.payload)return e.page<e.nbPages-1?Object(o.a)(Object(o.a)({},e),{},{page:e.page+1}):Object(o.a)(Object(o.a)({},e),{},{page:0});if("prev"===t.payload)return e.page>0?Object(o.a)(Object(o.a)({},e),{},{page:e.page-1}):Object(o.a)(Object(o.a)({},e),{},{page:e.nbPages-1});break;default:throw new Error("NO action type found")}},f=a(0),y={loading:!1,story:[],query:"react",page:0,nbPages:0},g=c.a.createContext(),x=function(e){var t=e.children,a=Object(n.useReducer)(h,y),c=Object(j.a)(a,2),r=c[0],s=c[1],x=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:b}),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:(n=e.sent)&&s({type:l,payload:{story:n.hits,nbPages:n.nbPages}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x("".concat("https://hn.algolia.com/api/v1/search?","query=").concat(r.query,"&page=").concat(r.page))}),[r.query,r.page]),Object(f.jsx)(g.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{removeStory:function(e){s({type:p,payload:e})},searchTopic:function(e){s({type:O,payload:e})},handlePageType:function(e){s({type:d,payload:e})}}),children:t})},m=function(){return Object(n.useContext)(g)},v=function(){var e=m(),t=e.searchTopic,a=e.query;return Object(f.jsxs)("form",{className:"search-form",onSubmit:function(e){return e.preventDefault()},children:[Object(f.jsx)("h2",{children:"search hacker news"}),Object(f.jsx)("input",{type:"text",className:"form-input",value:a,onChange:function(e){return t(e.target.value)}})]})},N=function(){var e=m(),t=e.loading,a=e.story,n=e.removeStory;return t?Object(f.jsx)("div",{className:"loading"}):Object(f.jsx)("div",{className:"stories",children:a.map((function(e){var t=e.objectID,a=e.url,c=e.title,r=e.num_comments,s=e.points,o=e.author,i=e.story_text;return Object(f.jsxs)("article",{className:"story",children:[Object(f.jsx)("h4",{className:"title",children:c||i}),Object(f.jsxs)("p",{className:"info",children:[s," by ",o," | ",r," comments"]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("a",{href:a,className:"read-link",children:"Read More..."}),Object(f.jsx)("button",{className:"remove-btn",onClick:function(){return n(t)},children:"remove"})]})]},t)}))})},k=function(){var e=m(),t=e.handlePageType,a=e.page,n=e.nbPages,c=e.loading;return Object(f.jsxs)("div",{className:"btn-container",children:[Object(f.jsx)("button",{disabled:c,onClick:function(){return t("prev")},children:"prev"}),Object(f.jsxs)("p",{children:[a+1," of ",n]}),Object(f.jsx)("button",{disabled:c,onClick:function(){return t("next")},children:"next"})]})};var E=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{}),Object(f.jsx)(k,{}),Object(f.jsx)(N,{})]})};s.a.createRoot(document.getElementById("root")).render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(x,{children:Object(f.jsx)(E,{})})}))}},[[19,1,2]]]);
//# sourceMappingURL=main.b7afe003.chunk.js.map